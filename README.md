# Androidä¸²å£é€šä¿¡æ¡†æ¶ SerialPort

[![Version](https://img.shields.io/badge/version-5.0.8-blue.svg)](https://github.com/cl-6666/serialPort)
[![API](https://img.shields.io/badge/API-21%2B-brightgreen.svg?style=flat)](https://android-arsenal.com/api?level=21)
[![License](https://img.shields.io/badge/license-Apache%202-green.svg)](https://www.apache.org/licenses/LICENSE-2.0)

> ä¸€ä¸ªçµæ´»ã€é«˜æ•ˆå¹¶ä¸”è½»é‡çš„Androidä¸²å£é€šä¿¡æ¡†æ¶ï¼Œè®©ä¸²å£æ“ä½œå˜å¾—ç®€å•æ˜“ç”¨ã€‚æ”¯æŒå•ä¸²å£ã€å¤šä¸²å£ã€ç²˜åŒ…å¤„ç†ã€è‡ªå®šä¹‰é…ç½®ç­‰åŠŸèƒ½ã€‚

<img src="https://github.com/cl-6666/serialPort/blob/master/img/multiple_images.png" width="650" height="360" alt="æ¼”ç¤º"/>  

## ğŸ“± ä½“éªŒæ¼”ç¤º

æƒ³è¦å¿«é€Ÿä½“éªŒä¸²å£é€šä¿¡æ¡†æ¶çš„å¼ºå¤§åŠŸèƒ½ï¼Ÿç›´æ¥ä¸‹è½½æ¼”ç¤º APK å®‰è£…åˆ°æ‚¨çš„ Android è®¾å¤‡ä¸Šè¯•è¯•å§ï¼

<div align="center">

### ğŸ“¥ [ç‚¹å‡»ä¸‹è½½æ¼”ç¤º APK](https://www.pgyer.com/XNzY)

[![Download APK](https://img.shields.io/badge/Download-APK%20v5.0.8-brightgreen.svg?style=for-the-badge&logo=android)](https://github.com/cl-6666/serialPort/releases/download/v5.0.8/serialport-demo-v5.0.8.apk)

**ç‰ˆæœ¬**: v5.0.8 | **å¤§å°**: ~7 MB | **API**: 21+ | **æ¶æ„**: arm64-v8a, armeabi-v7a, x86, x86_64

</div>

### æ¼”ç¤º APK åŠŸèƒ½

- âœ… å•ä¸²å£é€šä¿¡æ¼”ç¤º
- âœ… å¤šä¸²å£ç®¡ç†æ¼”ç¤º
- âœ… ç²˜åŒ…å¤„ç†ç­–ç•¥åˆ‡æ¢
- âœ… ä¸²å£å‚æ•°é…ç½®ï¼ˆæ•°æ®ä½ã€æ ¡éªŒä½ã€åœæ­¢ä½ï¼‰
- âœ… å®æ—¶æ•°æ®æ”¶å‘æµ‹è¯•
- âœ… åå…­è¿›åˆ¶/ASCII æ•°æ®æ˜¾ç¤º
- âœ… æ€§èƒ½æµ‹è¯•ä¸ç»Ÿè®¡

> **æç¤º**: æ¼”ç¤º APK éœ€è¦åœ¨å…·æœ‰ä¸²å£çš„ Android è®¾å¤‡ä¸Šè¿è¡Œï¼ˆå¦‚å·¥æ§è®¾å¤‡ã€å¼€å‘æ¿ç­‰ï¼‰ã€‚å¦‚æœæ‚¨çš„è®¾å¤‡æ²¡æœ‰ä¸²å£ï¼Œå¯ä»¥æŸ¥çœ‹æºç äº†è§£ä½¿ç”¨æ–¹æ³•ã€‚

## â­ ç‰¹æ€§

- ğŸš€ **ç®€å•æ˜“ç”¨** - é“¾å¼è°ƒç”¨ï¼Œä¸€è¡Œä»£ç å®Œæˆé…ç½®
- ğŸ”§ **å¤šä¸²å£æ”¯æŒ** - åŒæ—¶ç®¡ç†å¤šä¸ªä¸²å£ï¼Œç‹¬ç«‹é…ç½®
- ğŸ“¦ **æ™ºèƒ½ç²˜åŒ…å¤„ç†** - æ”¯æŒå¤šç§ç²˜åŒ…ç­–ç•¥ï¼Œå¯åŠ¨æ€åˆ‡æ¢
- âš¡ **é«˜æ€§èƒ½** - å¤šçº¿ç¨‹å¤„ç†ï¼Œçº¿ç¨‹å®‰å…¨è®¾è®¡
- ğŸ›¡ï¸ **ç¨³å®šå¯é ** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†
- ğŸ“ **è¯¦ç»†æ—¥å¿—** - ä¸°å¯Œçš„è°ƒè¯•ä¿¡æ¯ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜
- ğŸ¯ **çµæ´»é…ç½®** - æ”¯æŒæ•°æ®ä½ã€æ ¡éªŒä½ã€åœæ­¢ä½ç­‰å‚æ•°é…ç½®
- âœ¨ **Google Play è®¤è¯** - æ”¯æŒ 16KB é¡µé¢å¯¹é½ï¼Œå®Œå…¨ç¬¦åˆ Google Play ä¸Šæ¶è¦æ±‚

## ğŸ“– ç‰ˆæœ¬è¯´æ˜

- **å½“å‰ç‰ˆæœ¬**: 5.0.8 (æ¨è) - å…¨æ–°æ¶æ„ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒ Google Play 16KB é¡µé¢å¯¹é½
- **å†å²ç‰ˆæœ¬**: [4.1.1ç‰ˆæœ¬æ–‡æ¡£](README4.1.1.md) - ç¨³å®šç‰ˆæœ¬

### 5.0.8 ç‰ˆæœ¬æ›´æ–° ğŸ”¥ (2025-12-25)

- âœ… **16KB é¡µé¢å¯¹é½**: å®Œå…¨é€‚é… Google Play 16KB é¡µé¢å¤§å°è¦æ±‚
- âœ… **Android 15 æ”¯æŒ**: å…¼å®¹æœ€æ–° Android 15 ç³»ç»Ÿ
- âœ… **åŸç”Ÿåº“ä¼˜åŒ–**: arm64-v8a æ¶æ„åŸç”Ÿåº“å·²é€šè¿‡ Google Play å®¡æ ¸æ ‡å‡†
- âœ… **å‘åå…¼å®¹**: å®Œå…¨å…¼å®¹æ—§ç‰ˆæœ¬ Android è®¾å¤‡ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 

> **é‡è¦æç¤º**: ä» 2024 å¹´å¼€å§‹ï¼ŒGoogle Play è¦æ±‚æ‰€æœ‰ arm64-v8a åŸç”Ÿåº“å¿…é¡»æ”¯æŒ 16KB é¡µé¢å¤§å°ã€‚5.0.8 ç‰ˆæœ¬å·²å®Œå…¨é€‚é…æ­¤è¦æ±‚ï¼Œå¯æ”¾å¿ƒä¸Šæ¶ Google Playã€‚

### 5.0.0 ç‰ˆæœ¬é‡å¤§æ›´æ–° ğŸ‰

- âœ… **æ¶æ„é‡æ„**: ç§»é™¤SerialUtilsä¾èµ–ï¼Œæ¶æ„æ›´æ¸…æ™°
- âœ… **APIç®€åŒ–**: æ–°å¢SimpleSerialPortManagerï¼Œä½¿ç”¨æ›´ç®€å•
- âœ… **å¤šä¸²å£ç®¡ç†**: å…¨æ–°MultiSerialPortManagerï¼Œæ”¯æŒå¤æ‚åœºæ™¯
- âœ… **å¢å¼ºæ—¥å¿—**: è‡ªç ”æ—¥å¿—ç³»ç»Ÿï¼Œè°ƒè¯•ä¿¡æ¯æ›´ä¸°å¯Œ
- âœ… **ç‹¬ç«‹é…ç½®**: æ¯ä¸ªä¸²å£å¯ç‹¬ç«‹é…ç½®ç²˜åŒ…å¤„ç†ç­–ç•¥
- âœ… **æ€§èƒ½ä¼˜åŒ–**: å‡å°‘30%å†—ä½™ä»£ç ï¼Œæ€§èƒ½æå‡æ˜¾è‘—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¾èµ–é›†æˆ

åœ¨é¡¹ç›®çš„ `build.gradle` ä¸­æ·»åŠ ä¾èµ–ï¼š

```gradle
dependencies {
   implementation 'com.github.cl-6666:serialPort:v5.0.8'
}
```

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `build.gradle` ä¸­æ·»åŠ ï¼š

```gradle
allprojects {
    repositories {
        maven { url 'https://jitpack.io' }
    }
}
```

### æƒé™é…ç½®

åœ¨ `AndroidManifest.xml` ä¸­æ·»åŠ å¿…è¦æƒé™ï¼š

```xml
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
```

## ğŸ“š ä½¿ç”¨æŒ‡å—

### 1ï¸âƒ£ å•ä¸²å£ä½¿ç”¨ - åŸºç¡€ç¤ºä¾‹

#### æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼

```java
public class MainActivity extends AppCompatActivity {
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        
        // ä¸€è¡Œä»£ç æ‰“å¼€ä¸²å£å¹¶æ¥æ”¶æ•°æ®
        SimpleSerialPortManager.getInstance()
            .openSerialPort("/dev/ttyS4", 115200, data -> {
                String receivedData = new String(data);
                Log.i("Serial", "æ”¶åˆ°æ•°æ®: " + receivedData);
                // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
            });
    }
    
    // å‘é€æ•°æ®
    private void sendData() {
        SimpleSerialPortManager.getInstance().sendData("Hello World");
    }
    
    @Override
    protected void onDestroy() {
        super.onDestroy();
        // å…³é—­ä¸²å£
        SimpleSerialPortManager.getInstance().closeSerialPort();
    }
}
```

#### å®Œæ•´é…ç½®ç¤ºä¾‹

```java
public class App extends Application {
    
    @Override
    public void onCreate() {
        super.onCreate();
        
        // å…¨å±€é…ç½®ï¼ˆå¯é€‰ï¼‰
        new SimpleSerialPortManager.QuickConfig()
            .setIntervalSleep(50)                    // è¯»å–é—´éš”50ms
            .setEnableLog(true)                      // å¯ç”¨æ—¥å¿—
            .setLogTag("SerialPortApp")              // è®¾ç½®æ—¥å¿—æ ‡ç­¾
            .setDatabits(8)                          // æ•°æ®ä½8
            .setParity(0)                            // æ— æ ¡éªŒ
            .setStopbits(1)                          // åœæ­¢ä½1
            .setStickyPacketStrategy(SimpleSerialPortManager.StickyPacketStrategy.NO_PROCESSING)
            .apply(this);
    }
}
```

### 2ï¸âƒ£ æ•°æ®ä½ã€æ ¡éªŒä½ã€åœæ­¢ä½é…ç½®

```java
public class SerialConfigExample {
    
    public void configureSerialParams() {
        SimpleSerialPortManager manager = SimpleSerialPortManager.getInstance();
        
        // æ–¹å¼1ï¼šä½¿ç”¨QuickConfigé…ç½®
        new SimpleSerialPortManager.QuickConfig()
            .setDatabits(8)        // æ•°æ®ä½ï¼š5, 6, 7, 8
            .setParity(0)          // æ ¡éªŒä½ï¼š0=æ— æ ¡éªŒ, 1=å¥‡æ ¡éªŒ, 2=å¶æ ¡éªŒ
            .setStopbits(1)        // åœæ­¢ä½ï¼š1 æˆ– 2
            .setFlags(0)           // æ ‡å¿—ä½
            .apply(getApplication());
        
        // æ–¹å¼2ï¼šåŠ¨æ€è®¾ç½®
        manager.setDatabits(8)     // è®¾ç½®æ•°æ®ä½
               .setParity(2)       // è®¾ç½®å¶æ ¡éªŒ
               .setStopbits(1)     // è®¾ç½®åœæ­¢ä½1
               .setFlags(0);       // è®¾ç½®æ ‡å¿—ä½
        
        // æ‰“å¼€ä¸²å£
        manager.openSerialPort("/dev/ttyS4", 115200, data -> {
            Log.i("Serial", "æ•°æ®: " + new String(data));
        });
    }
    
    // å¸¸ç”¨é…ç½®ç»„åˆ
    public void commonConfigurations() {
        SimpleSerialPortManager manager = SimpleSerialPortManager.getInstance();
        
        // æ ‡å‡†é…ç½® 8N1 (8æ•°æ®ä½, æ— æ ¡éªŒ, 1åœæ­¢ä½)
        manager.setDatabits(8).setParity(0).setStopbits(1);
        
        // Modbus RTU 8E1 (8æ•°æ®ä½, å¶æ ¡éªŒ, 1åœæ­¢ä½) 
        manager.setDatabits(8).setParity(2).setStopbits(1);
        
        // è€å¼è®¾å¤‡ 7E2 (7æ•°æ®ä½, å¶æ ¡éªŒ, 2åœæ­¢ä½)
        manager.setDatabits(7).setParity(2).setStopbits(2);
    }
}
```

### 3ï¸âƒ£ ç²˜åŒ…å¤„ç†è¯¦è§£

ç²˜åŒ…æ˜¯ä¸²å£é€šä¿¡ä¸­å¸¸è§çš„é—®é¢˜ï¼Œ5.0.0ç‰ˆæœ¬æä¾›äº†å¤šç§å¤„ç†ç­–ç•¥ï¼š

```java
public class StickyPacketExample {
    
    public void noProcessing() {
        // ç­–ç•¥1ï¼šä¸å¤„ç†ç²˜åŒ… - é€‚ç”¨äºç®€å•æ•°æ®æµ
        new SimpleSerialPortManager.QuickConfig()
            .setStickyPacketStrategy(SimpleSerialPortManager.StickyPacketStrategy.NO_PROCESSING)
            .apply(this);
    }
    
    public void delimiterBased() {
        // ç­–ç•¥2ï¼šåŸºäºåˆ†éš”ç¬¦ - é€‚ç”¨äºæ–‡æœ¬åè®®
        new SimpleSerialPortManager.QuickConfig()
            .setStickyPacketStrategy(SimpleSerialPortManager.StickyPacketStrategy.DELIMITER_BASED)
            .apply(this);
        
        // è‡ªå®šä¹‰åˆ†éš”ç¬¦
        SimpleSerialPortManager.getInstance()
            .configureStickyPacket(SimpleSerialPortManager.StickyPacketStrategy.DELIMITER_BASED);
    }
    
    public void fixedLength() {
        // ç­–ç•¥3ï¼šå›ºå®šé•¿åº¦ - é€‚ç”¨äºå›ºå®šé•¿åº¦åè®®
        new SimpleSerialPortManager.QuickConfig()
            .setStickyPacketStrategy(SimpleSerialPortManager.StickyPacketStrategy.FIXED_LENGTH)
            .apply(this);
    }
    
    public void variableLength() {
        // ç­–ç•¥4ï¼šå¯å˜é•¿åº¦ - é€‚ç”¨äºå¸¦é•¿åº¦å­—æ®µçš„åè®®
        new SimpleSerialPortManager.QuickConfig()
            .setStickyPacketStrategy(SimpleSerialPortManager.StickyPacketStrategy.VARIABLE_LENGTH)
            .apply(this);
    }
}
```

### 4ï¸âƒ£ å¤šä¸²å£ç®¡ç† - å¼ºå¤§åŠŸèƒ½

```java
public class MultiSerialExample {
    
    public void basicMultiSerial() {
        MultiSerialPortManager manager = SimpleSerialPortManager.multi();
        
        // ä¸²å£1ï¼šGPSæ¨¡å—ï¼Œä¸éœ€è¦ç²˜åŒ…å¤„ç†
        manager.openSerialPort("GPS", "/dev/ttyS1", 9600,
            new MultiSerialPortManager.SerialPortConfig.Builder()
                .setDatabits(8)
                .setParity(0)
                .setStopbits(1)
                .setStickyPacketHelpers(new BaseStickPackageHelper()) // ä¸å¤„ç†ç²˜åŒ…
                .build(),
            // çŠ¶æ€å›è°ƒ
            (serialId, success, status) -> {
                Log.i("GPS", "çŠ¶æ€: " + (success ? "æˆåŠŸ" : "å¤±è´¥"));
            },
            // æ•°æ®å›è°ƒ
            (serialId, data) -> {
                String gpsData = new String(data);
                Log.i("GPS", "æ•°æ®: " + gpsData);
                handleGpsData(gpsData);
            });
        
        // ä¸²å£2ï¼šä¼ æ„Ÿå™¨æ¨¡å—ï¼Œéœ€è¦æ¢è¡Œç¬¦åˆ†åŒ…
        manager.openSerialPort("SENSOR", "/dev/ttyS2", 115200,
            new MultiSerialPortManager.SerialPortConfig.Builder()
                .setDatabits(8)
                .setParity(0) 
                .setStopbits(1)
                .setStickyPacketHelpers(new SpecifiedStickPackageHelper("\n")) // æ¢è¡Œç¬¦åˆ†åŒ…
                .build(),
            null, // ä¸éœ€è¦çŠ¶æ€å›è°ƒ
            (serialId, data) -> {
                String sensorData = new String(data).trim();
                Log.i("SENSOR", "æ•°æ®: " + sensorData);
                handleSensorData(sensorData);
            });
        
        // å‘é€æ•°æ®åˆ°ä¸åŒä¸²å£
        manager.sendData("GPS", "AT+GPS?\r\n");
        manager.sendData("SENSOR", "READ_TEMP\n");
    }
    
    // åŠ¨æ€ç®¡ç†ä¸²å£
    public void dynamicManagement() {
        MultiSerialPortManager manager = SimpleSerialPortManager.multi();
        
        // æŸ¥çœ‹ä¸²å£çŠ¶æ€
        List<String> openedPorts = manager.getOpenedSerialPorts();
        boolean isOpened = manager.isSerialPortOpened("GPS");
        manager.printAllSerialStatus();
        
        // åŠ¨æ€æ›´æ–°ç²˜åŒ…ç­–ç•¥
        manager.updateStickyPacketHelpers("GPS", 
            new AbsStickPackageHelper[]{new SpecifiedStickPackageHelper("\r\n")});
        
        // å…³é—­ç‰¹å®šä¸²å£
        manager.closeSerialPort("GPS");
        
        // å…³é—­æ‰€æœ‰ä¸²å£
        manager.closeAllSerialPorts();
    }
}
```

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### å·¥ä¸šæ§åˆ¶åœºæ™¯
```java
public class IndustrialControlExample {
    
    public void setupIndustrialPorts() {
        MultiSerialPortManager manager = SimpleSerialPortManager.multi();
        
        // PLCé€šä¿¡ - Modbus RTU
        manager.openSerialPort("PLC", "/dev/ttyS1", 9600,
            new MultiSerialPortManager.SerialPortConfig.Builder()
                .setDatabits(8).setParity(2).setStopbits(1) // 8E1
                .setStickyPacketHelpers(new StaticLenStickPackageHelper(8))
                .build(),
            null, this::handlePlcData);
        
        // ä¼ æ„Ÿå™¨æ•°æ®é‡‡é›† - æ–‡æœ¬åè®®
        manager.openSerialPort("SENSORS", "/dev/ttyS3", 9600,
            new MultiSerialPortManager.SerialPortConfig.Builder()
                .setDatabits(7).setParity(2).setStopbits(1) // 7E1
                .setStickyPacketHelpers(new SpecifiedStickPackageHelper("\r\n"))
                .build(),
            null, this::handleSensorData);
    }
}
```

### é€šä¿¡ç½‘å…³åœºæ™¯
```java
public class GatewayExample {
    
    public void setupGateway() {
        MultiSerialPortManager manager = SimpleSerialPortManager.multi();
        
        // ä¸Šè¡Œé€šä¿¡ï¼ˆä¸æœåŠ¡å™¨ï¼‰
        manager.openSerialPort("UPLINK", "/dev/ttyS1", 115200,
            new MultiSerialPortManager.SerialPortConfig.Builder()
                .setStickyPacketHelpers(new SpecifiedStickPackageHelper("\n"))
                .build(),
            null, this::handleUplinkData);
        
        // ä¸‹è¡Œè®¾å¤‡1 - GPS
        manager.openSerialPort("GPS", "/dev/ttyS2", 9600,
            new MultiSerialPortManager.SerialPortConfig.Builder()
                .setStickyPacketHelpers(new SpecifiedStickPackageHelper("\r\n"))
                .build(),
            null, data -> forwardToUplink("GPS", data));
    }
    
    private void forwardToUplink(String deviceId, byte[] data) {
        String message = String.format("[%s]%s\n", deviceId, new String(data));
        SimpleSerialPortManager.multi().sendData("UPLINK", message);
    }
}
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### æ—¥å¿—ç³»ç»Ÿ
```java
// å¯ç”¨è¯¦ç»†æ—¥å¿—
SerialPortLogUtil.setDebugEnabled(true);

// è‡ªå®šä¹‰æ—¥å¿—è¾“å‡º
SerialPortLogUtil.i("MyTag", "è‡ªå®šä¹‰æ—¥å¿—ä¿¡æ¯");
SerialPortLogUtil.printData("å‘é€", data); // åå…­è¿›åˆ¶+ASCIIæ˜¾ç¤º
SerialPortLogUtil.printSerialConfig("MySerial", 8, 0, 1, 0); // é…ç½®ä¿¡æ¯
```

### é”™è¯¯å¤„ç†
```java
manager.openSerialPort("TEST", "/dev/ttyS1", 9600,
    (serialId, success, status) -> {
        if (!success) {
            switch (status) {
                case NO_READ_WRITE_PERMISSION:
                    Log.e("Serial", "æƒé™ä¸è¶³");
                    break;
                case OPEN_FAIL:
                    Log.e("Serial", "æ‰“å¼€å¤±è´¥");
                    break;
            }
        }
    },
    dataCallback);
```

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **ä¸²å£æ‰“å¼€å¤±è´¥**
   ```java
   // æ£€æŸ¥è®¾å¤‡è·¯å¾„
   String[] devices = new SerialPortFinder().getAllDevicesPath();
   
   // æ£€æŸ¥æƒé™
   File deviceFile = new File("/dev/ttyS4");
   boolean canRead = deviceFile.canRead();
   boolean canWrite = deviceFile.canWrite();
   ```

2. **æ•°æ®æ¥æ”¶ä¸å®Œæ•´**
   ```java
   // å¯ç”¨æ—¥å¿—æŸ¥çœ‹åŸå§‹æ•°æ®
   SerialPortLogUtil.setDebugEnabled(true);
   
   // å°è¯•ä¸åŒçš„ç²˜åŒ…ç­–ç•¥
   manager.configureStickyPacket(SimpleSerialPortManager.StickyPacketStrategy.NO_PROCESSING);
   ```

## ğŸ“– APIå‚è€ƒ

### SimpleSerialPortManager (å•ä¸²å£)
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `getInstance()` | è·å–å•ä¾‹å®ä¾‹ |
| `openSerialPort(path, baudRate, callback)` | æ‰“å¼€ä¸²å£ |
| `sendData(data)` | å‘é€æ•°æ® |
| `closeSerialPort()` | å…³é—­ä¸²å£ |
| `setDatabits(databits)` | è®¾ç½®æ•°æ®ä½ |
| `setParity(parity)` | è®¾ç½®æ ¡éªŒä½ |
| `setStopbits(stopbits)` | è®¾ç½®åœæ­¢ä½ |

### MultiSerialPortManager (å¤šä¸²å£)
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `getInstance()` | è·å–å®ä¾‹ |
| `openSerialPort(id, path, baudRate, config, statusCallback, dataCallback)` | æ‰“å¼€ä¸²å£ |
| `sendData(serialId, data)` | å‘é€æ•°æ®åˆ°æŒ‡å®šä¸²å£ |
| `closeSerialPort(serialId)` | å…³é—­æŒ‡å®šä¸²å£ |
| `closeAllSerialPorts()` | å…³é—­æ‰€æœ‰ä¸²å£ |
| `isSerialPortOpened(serialId)` | æ£€æŸ¥ä¸²å£çŠ¶æ€ |

## ğŸ¯ ç‰ˆæœ¬è¿ç§»

### ä»4.1.1è¿ç§»åˆ°5.0.0

**æ—§ç‰ˆæœ¬ (4.1.1)**:
```java
// åœ¨Applicationä¸­åˆå§‹åŒ–
SerialUtils.getInstance().init(this, true, "TAG", 50, 8, 0, 1);

// ä½¿ç”¨
SerialUtils.getInstance().setmSerialPortDirectorListens(...);
SerialUtils.getInstance().manyOpenSerialPort(list);
```

**æ–°ç‰ˆæœ¬ (5.0.0)**:
```java
// ç®€åŒ–çš„åˆå§‹åŒ–ï¼ˆå¯é€‰ï¼‰
new SimpleSerialPortManager.QuickConfig()
    .setDatabits(8).setParity(0).setStopbits(1)
    .apply(this);

// ç›´æ¥ä½¿ç”¨
SimpleSerialPortManager.getInstance()
    .openSerialPort("/dev/ttyS4", 115200, data -> {
        // å¤„ç†æ•°æ®
    });
```

## ğŸ“ è”ç³»æˆ‘ä»¬

- **QQç¾¤**: 458173716
- **åšå®¢**: https://blog.csdn.net/a214024475/article/details/113735085
- **GitHub**: https://github.com/cl-6666/serialPort


### PCç«¯ä¸²å£è°ƒè¯•åŠ©æ‰‹
<img src="https://github.com/cl-6666/serialPort/blob/master/img/pc_ck.jpg" width="440" height="320" alt="PCè°ƒè¯•åŠ©æ‰‹"/>

**ä¸‹è½½é“¾æ¥**: https://pan.baidu.com/s/1DL2TOHz9bl9RIKIG3oCSWw?pwd=f7sh  

### QQæŠ€æœ¯äº¤æµç¾¤
<img src="https://github.com/cl-6666/serialPort/blob/master/img/qq2.jpg" width="350" height="560" alt="QQç¾¤"/>

**QQç¾¤å·**: 458173716

## ğŸ”¬ æŠ€æœ¯è¯´æ˜

### 16KB é¡µé¢å¯¹é½é€‚é… (v5.0.8)

ä» 2024 å¹´å¼€å§‹ï¼ŒGoogle Play è¦æ±‚æ‰€æœ‰ä½¿ç”¨åŸç”Ÿåº“ï¼ˆ.so æ–‡ä»¶ï¼‰çš„åº”ç”¨å¿…é¡»æ”¯æŒ 16KB é¡µé¢å¤§å°ï¼Œä»¥é€‚é…æœ€æ–°çš„ Android è®¾å¤‡ã€‚æœ¬åº“å·²å®Œå…¨é€‚é…æ­¤è¦æ±‚ã€‚

#### æŠ€æœ¯å®ç°

æˆ‘ä»¬åœ¨ CMake æ„å»ºé…ç½®ä¸­é’ˆå¯¹ arm64-v8a æ¶æ„æ·»åŠ äº†ä»¥ä¸‹é“¾æ¥å™¨æ ‡å¿—ï¼š

```cmake
# CMakeLists.txt
if(ANDROID_ABI STREQUAL "arm64-v8a")
    target_compile_options(SerialPort PRIVATE -fno-emulated-tls)
    target_link_options(SerialPort PRIVATE 
        "LINKER:-z,max-page-size=16384"
        "LINKER:-z,common-page-size=16384")
endif()
```

#### å…¼å®¹æ€§è¯´æ˜

- âœ… **å®Œå…¨å…¼å®¹**: æ”¯æŒæ‰€æœ‰ Android 5.0+ (API 21+) è®¾å¤‡
- âœ… **æ— éœ€ä¿®æ”¹**: å¼€å‘è€…æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ï¼Œç›´æ¥å‡çº§å³å¯
- âœ… **æ€§èƒ½ä¼˜åŒ–**: 16KB é¡µé¢å¯¹é½å¯æå‡éƒ¨åˆ†è®¾å¤‡çš„å†…å­˜ç®¡ç†æ•ˆç‡
- âœ… **Google Play è®¤è¯**: å·²é€šè¿‡ Google Play çš„ 16KB é¡µé¢å¯¹é½æ£€æµ‹

#### éªŒè¯æ–¹æ³•

ä½¿ç”¨ Android Studio çš„ APK Analyzer å·¥å…·å¯ä»¥éªŒè¯åŸç”Ÿåº“æ˜¯å¦æ”¯æŒ 16KB é¡µé¢å¯¹é½ï¼š

1. æ„å»º APK æˆ– AAB æ–‡ä»¶
2. åœ¨ Android Studio ä¸­é€‰æ‹© `Build` â†’ `Analyze APK...`
3. æŸ¥çœ‹ `lib/arm64-v8a/libSerialPort.so` çš„ `Alignment` åˆ—
4. æ˜¾ç¤º `16 KB` è¡¨ç¤ºå·²æ­£ç¡®é…ç½®

#### ç›¸å…³èµ„æº

- [Google Play 16KB é¡µé¢å¤§å°è¦æ±‚](https://developer.android.com/guide/practices/page-sizes)
- [CMake é“¾æ¥å™¨é€‰é¡¹æ–‡æ¡£](https://cmake.org/cmake/help/latest/command/target_link_options.html)

---
